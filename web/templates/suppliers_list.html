{{template "layout.html" .}}

{{define "title"}}{{.Title}}{{end}}

{{define "content"}}
<div class="page-header">
    <div class="title-section">
        <h1>{{.Title}}</h1>
        <p class="subtitle">협력 업체 및 공급처 정보를 관리합니다.</p>
    </div>
    <button hx-get="/admin/suppliers/new" hx-target="#global-modal-body" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <line x1="19" y1="8" x2="19" y2="14"></line>
            <line x1="22" y1="11" x2="16" y2="11"></line>
        </svg>
        업체 추가
    </button>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>업체명</th>
                <th>약칭</th>
                <th>전화번호</th>
                <th>이메일</th>
                <th>색상</th>
                <th>상태</th>
                <th style="text-align: right;">관리</th>
            </tr>
        </thead>
        <tbody>
            {{range .Data.Items}}
            <tr id="sup-row-{{.ID}}">
                <td style="font-weight: 600; color: var(--text-main);">{{.Name}}</td>
                <td>{{if .ShortName}}{{.ShortName}}{{else}}-{{end}}</td>
                <td>{{.Tel}}</td>
                <td>{{.Email}}</td>
                <td>
                    {{if .Color}}
                    <span style="display: inline-flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 14px; height: 14px; border-radius: 3px; border: 1px solid var(--border); background: {{.Color}};"></span>
                        <span>{{.Color}}</span>
                    </span>
                    {{else}}
                    -
                    {{end}}
                </td>
                <td>
                    {{if .IsActive}}
                    <span class="badge badge-success">활성</span>
                    {{else}}
                    <span class="badge badge-warning">비활성</span>
                    {{end}}
                </td>
                <td>
                    <div style="display: flex; gap: 0.5rem; justify-content: flex-end;">
                        <button hx-get="/admin/suppliers/{{.ID}}/edit" hx-target="#global-modal-body"
                            class="btn btn-primary btn-sm">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M12 20h9"></path>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"></path>
                            </svg>
                            수정
                        </button>
                        <button class="btn btn-danger btn-sm" hx-delete="/admin/suppliers/{{.ID}}"
                            hx-confirm="정말 삭제하시겠습니까?" hx-target="#sup-row-{{.ID}}" hx-swap="outerHTML">
                            <svg viewBox="0 0 24 24" aria-hidden="true">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"></path>
                                <path d="M10 11v6"></path>
                                <path d="M14 11v6"></path>
                                <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"></path>
                            </svg>
                            삭제
                        </button>
                    </div>
                </td>
            </tr>
            {{else}}
            <tr>
                <td colspan="7" style="text-align: center; padding: 5rem 0;">
                    <div class="empty-state">
                        <p style="color: var(--text-muted); font-size: 1rem;">등록된 업체가 없습니다.</p>
                    </div>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<div class="pagination">
    {{$pager := .Data.Pager}}
    {{if gt $pager.TotalPages 1}}
    {{if gt $pager.CurrentPage 1}}
    <a href="?page=1" class="page-link" title="First">&laquo;</a>
    <a href="?page={{add $pager.CurrentPage -1}}" class="page-link" title="Previous">&lsaquo;</a>
    {{end}}

    {{range $p := $pager.Pages}}
    <a href="?page={{$p}}" class="page-link {{if eq $p $pager.CurrentPage}}active{{end}}">{{$p}}</a>
    {{end}}

    {{if lt $pager.CurrentPage $pager.TotalPages}}
    <a href="?page={{add $pager.CurrentPage 1}}" class="page-link" title="Next">&rsaquo;</a>
    <a href="?page={{$pager.TotalPages}}" class="page-link" title="Last">&raquo;</a>
    {{end}}
    {{end}}
</div>

<style>
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-bottom: 2.5rem;
    }

    .subtitle {
        color: var(--text-muted);
        font-size: 0.95rem;
    }

    .text-muted {
        color: var(--text-muted);
        font-size: 0.8em;
        margin-right: 2px;
    }

    .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
    }
</style>
{{end}}
